<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verger du Coin - Programme Fid√©lit√©</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="client-styles.css">
</head>
<body class="client-page">
    <!-- Header Client -->
    <header class="client-header">
        <div class="client-header-content">
            <a href="reservation.html" class="client-logo">
                <span class="logo-icon">üçé</span>
                <span class="logo-text">Verger du Coin</span>
            </a>
            <nav class="client-nav">
                <a href="reservation.html">R√©server</a>
                <a href="abonnements.html">Abonnements</a>
                <a href="inscription.html" class="active">Fid√©lit√©</a>
            </nav>
            <a href="index.html" class="btn-admin">Espace Pro</a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section inscription-hero">
        <div class="hero-content">
            <h1>‚≠ê Programme Fid√©lit√©</h1>
            <p>Rejoignez notre communaut√© et profitez d'avantages exclusifs sur vos achats au Verger du Coin.</p>
        </div>
        <div class="hero-badges">
            <span class="hero-badge">üéÅ 10‚Ç¨ offerts √† l'inscription</span>
            <span class="hero-badge">üí´ 1‚Ç¨ = 1 point</span>
            <span class="hero-badge">üéÇ Cadeau anniversaire</span>
        </div>
    </section>

    <!-- Inscription Section -->
    <section class="inscription-section">
        <div class="inscription-card">
            <h2>Rejoignez le club !</h2>
            <p>Inscrivez-vous gratuitement et commencez √† cumuler des points d√®s votre prochaine visite.</p>

            <!-- Benefits Grid -->
            <div class="benefits-grid">
                <div class="benefit-item">
                    <span>üéÅ</span>
                    <span>10‚Ç¨ offerts √† l'inscription</span>
                </div>
                <div class="benefit-item">
                    <span>üí´</span>
                    <span>1‚Ç¨ d√©pens√© = 1 point</span>
                </div>
                <div class="benefit-item">
                    <span>üéÇ</span>
                    <span>Surprise pour votre anniversaire</span>
                </div>
                <div class="benefit-item">
                    <span>üì∞</span>
                    <span>Offres exclusives par email</span>
                </div>
                <div class="benefit-item">
                    <span>üè∑Ô∏è</span>
                    <span>R√©ductions membres</span>
                </div>
                <div class="benefit-item">
                    <span>‚≠ê</span>
                    <span>Ventes priv√©es</span>
                </div>
            </div>

            <!-- Inscription Form -->
            <form id="inscription-form" onsubmit="submitInscription(event)">
                <h4 class="form-section-title">üë§ Vos informations</h4>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Pr√©nom *</label>
                        <input type="text" class="form-input" id="fid-prenom" required placeholder="Jean">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nom *</label>
                        <input type="text" class="form-input" id="fid-nom" required placeholder="Dupont">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Email *</label>
                    <input type="email" class="form-input" id="fid-email" required placeholder="jean.dupont@email.fr">
                </div>

                <div class="form-group">
                    <label class="form-label">T√©l√©phone *</label>
                    <input type="tel" class="form-input" id="fid-tel" required placeholder="06 XX XX XX XX">
                </div>

                <div class="form-group">
                    <label class="form-label">Date de naissance (pour votre cadeau anniversaire)</label>
                    <input type="date" class="form-input" id="fid-birthday">
                </div>

                <div class="form-group">
                    <label class="form-label">Adresse (optionnel)</label>
                    <input type="text" class="form-input" id="fid-adresse" placeholder="123 rue du Verger, 69000 Lyon">
                </div>

                <h4 class="form-section-title">üõí Vos pr√©f√©rences</h4>

                <div class="form-group">
                    <label class="form-label">O√π faites-vous habituellement vos achats ?</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 8px;">
                        <label class="checkbox-label" style="background: var(--cream); padding: 10px 16px; border-radius: 10px;">
                            <input type="checkbox" name="canal" value="kiosque">
                            <span>üè™ Kiosque √† la ferme</span>
                        </label>
                        <label class="checkbox-label" style="background: var(--cream); padding: 10px 16px; border-radius: 10px;">
                            <input type="checkbox" name="canal" value="marche-samedi">
                            <span>üõí March√© du samedi</span>
                        </label>
                        <label class="checkbox-label" style="background: var(--cream); padding: 10px 16px; border-radius: 10px;">
                            <input type="checkbox" name="canal" value="marche-mercredi">
                            <span>üõí March√© du mercredi</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Pr√©f√©rences alimentaires (optionnel)</label>
                    <textarea class="form-input" id="fid-preferences" rows="2" placeholder="Allergies, r√©gime particulier, produits pr√©f√©r√©s..."></textarea>
                </div>

                <h4 class="form-section-title">üîí Protection de vos donn√©es (RGPD)</h4>

                <div style="background: var(--cream); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <p style="font-size: 13px; color: var(--gray-600); line-height: 1.7; margin-bottom: 16px;">
                        <strong>Responsable du traitement :</strong> Verger du Coin SARL<br>
                        <strong>Finalit√© :</strong> Gestion de votre compte fid√©lit√©, envoi d'offres personnalis√©es<br>
                        <strong>Base l√©gale :</strong> Votre consentement explicite<br>
                        <strong>Dur√©e de conservation :</strong> Dur√©e de votre inscription + 1 an d'inactivit√© maximum
                    </p>

                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <label class="checkbox-label">
                            <input type="checkbox" id="consent-donnees" required>
                            <span><strong>J'accepte</strong> que mes donn√©es personnelles soient collect√©es et trait√©es pour la gestion de mon compte fid√©lit√©. *</span>
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" id="consent-newsletter">
                            <span>J'accepte de recevoir la <strong>newsletter mensuelle</strong> (recettes, actualit√©s, √©v√©nements)</span>
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" id="consent-offres">
                            <span>J'accepte de recevoir des <strong>offres promotionnelles personnalis√©es</strong> par email</span>
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" id="consent-sms">
                            <span>J'accepte de recevoir des <strong>notifications SMS</strong> (alertes stock, rappels)</span>
                        </label>
                    </div>
                </div>

                <div style="background: var(--leaf-light); padding: 16px; border-radius: 12px; margin-bottom: 24px;">
                    <p style="font-size: 13px; color: var(--forest); line-height: 1.6;">
                        <strong>Vos droits :</strong> Vous pouvez √† tout moment acc√©der, rectifier ou supprimer vos donn√©es, ou retirer votre consentement en nous contactant √† <a href="mailto:rgpd@vergerducoin.fr" style="color: var(--forest-dark);">rgpd@vergerducoin.fr</a>
                    </p>
                </div>

                <button type="submit" class="btn btn-primary btn-full" style="padding: 16px;">
                    ‚ú® Cr√©er mon compte fid√©lit√©
                </button>

                <p style="text-align: center; font-size: 12px; color: var(--gray-400); margin-top: 16px;">
                    * Champs obligatoires
                </p>
            </form>
        </div>
    </section>

    <!-- How Points Work -->
    <section style="max-width: 900px; margin: 0 auto; padding: 0 40px 80px;">
        <div style="background: var(--white); border-radius: 24px; padding: 48px; box-shadow: var(--shadow);">
            <h2 style="font-family: var(--font-display); font-size: 28px; color: var(--forest-dark); text-align: center; margin-bottom: 16px;">Comment √ßa marche ?</h2>
            <p style="text-align: center; color: var(--gray-500); margin-bottom: 40px;">Cumulez des points et profitez d'avantages exclusifs</p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 32px;">
                <div style="text-align: center;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--honey) 0%, #C4922E 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: 36px; color: var(--white);">üí´</div>
                    <h4 style="font-family: var(--font-display); color: var(--forest-dark); margin-bottom: 8px;">Cumulez</h4>
                    <p style="font-size: 14px; color: var(--gray-500);">1‚Ç¨ d√©pens√© = 1 point<br>Valable kiosque et march√©s</p>
                </div>
                <div style="text-align: center;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--honey) 0%, #C4922E 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: 36px; color: var(--white);">üéÅ</div>
                    <h4 style="font-family: var(--font-display); color: var(--forest-dark); margin-bottom: 8px;">√âchangez</h4>
                    <p style="font-size: 14px; color: var(--gray-500);">100 points = 5‚Ç¨ de r√©duction<br>200 points = 12‚Ç¨ de r√©duction</p>
                </div>
                <div style="text-align: center;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--honey) 0%, #C4922E 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: 36px; color: var(--white);">üèÜ</div>
                    <h4 style="font-family: var(--font-display); color: var(--forest-dark); margin-bottom: 8px;">Progressez</h4>
                    <p style="font-size: 14px; color: var(--gray-500);">Statut Gold √† 500 points<br>Points x2 sur tous vos achats</p>
                </div>
            </div>

            <div style="margin-top: 40px; padding: 24px; background: linear-gradient(135deg, var(--forest) 0%, var(--forest-dark) 100%); border-radius: 16px; text-align: center;">
                <p style="color: var(--white); font-size: 18px; font-weight: 500;">
                    üéâ Bonus inscription : <strong>10‚Ç¨ offerts</strong> d√®s 20‚Ç¨ d'achat !
                </p>
            </div>
        </div>
    </section>

    <!-- Success Modal -->
    <div class="modal-overlay" id="success-modal">
        <div class="modal-content" style="text-align: center; max-width: 450px;">
            <div class="confirmation-success">
                <div class="success-icon">‚≠ê</div>
                <h3 style="color: var(--forest) !important;">Bienvenue dans le club !</h3>
                <p>Votre compte fid√©lit√© a √©t√© cr√©√© avec succ√®s.</p>
            </div>

            <div style="background: var(--honey-glow); padding: 20px; border-radius: 16px; margin: 24px 0;">
                <p style="font-size: 14px; color: var(--bark); margin-bottom: 8px;">Votre bonus de bienvenue</p>
                <p style="font-size: 32px; font-weight: 700; color: var(--forest); font-family: var(--font-display);">10‚Ç¨ offerts</p>
                <p style="font-size: 13px; color: var(--gray-500);">Utilisable d√®s 20‚Ç¨ d'achat</p>
            </div>

            <div style="background: var(--cream); padding: 16px; border-radius: 12px; margin-bottom: 24px; text-align: left;">
                <p style="font-size: 14px; color: var(--gray-600); line-height: 1.6;">
                    üìß Un email de confirmation a √©t√© envoy√© √† <strong id="confirm-email">votre adresse</strong><br>
                    üí≥ Pr√©sentez votre email ou t√©l√©phone lors de vos achats pour cumuler vos points !
                </p>
            </div>

            <button class="btn btn-primary btn-full" onclick="closeSuccessModal()">C'est parti !</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="client-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>üçé Verger du Coin</h4>
                <p>Exploitation familiale depuis 1985<br>Agriculture raisonn√©e</p>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p>üìç Chemin du Verger, 69000 Lyon</p>
                <p>üìû 04 XX XX XX XX</p>
                <p>‚úâÔ∏è contact@vergerducoin.fr</p>
            </div>
            <div class="footer-section">
                <h4>Donn√©es personnelles</h4>
                <p>‚úâÔ∏è rgpd@vergerducoin.fr</p>
                <p><a href="#" style="color: rgba(255,255,255,0.7);">Politique de confidentialit√©</a></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2024 Verger du Coin - <a href="#">Mentions l√©gales</a> - <a href="#">Politique de confidentialit√©</a> - <a href="#">Gestion des cookies</a></p>
        </div>
    </footer>

    <script src="data.js"></script>
    <script>
        function submitInscription(event) {
            event.preventDefault();

            // Validate required fields
            const prenom = document.getElementById('fid-prenom').value;
            const nom = document.getElementById('fid-nom').value;
            const email = document.getElementById('fid-email').value;
            const tel = document.getElementById('fid-tel').value;
            const consentDonnees = document.getElementById('consent-donnees').checked;

            if (!prenom || !nom || !email || !tel) {
                alert('Veuillez remplir tous les champs obligatoires');
                return;
            }

            if (!consentDonnees) {
                alert('Veuillez accepter le traitement de vos donn√©es personnelles');
                return;
            }

            // Ajouter le nouveau client √† la base de donn√©es
            const newClient = {
                id: CLIENTS.length > 0 ? Math.max(...CLIENTS.map(c => c.id)) + 1 : 1,
                nom: nom,
                prenom: prenom,
                email: email,
                telephone: tel,
                pointsFidelite: 100, // Bonus de bienvenue (10‚Ç¨ = 100 points)
                abonnement: false,
                consentementRGPD: true,
                dateInscription: new Date().toISOString().split('T')[0]
            };

            CLIENTS.push(newClient);
            saveAllData(); // Sauvegarder dans localStorage

            console.log('Nouveau client ajout√©:', newClient);

            // Show success modal
            document.getElementById('confirm-email').textContent = email;
            document.getElementById('success-modal').classList.add('active');

            // Reset form
            document.getElementById('inscription-form').reset();
        }

        function closeSuccessModal() {
            document.getElementById('success-modal').classList.remove('active');
        }
    </script>
</body>
</html>
